<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CanSat MQ-2 Pollution Report</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        
:root {
    --bg-dark: #0f172a;
    --bg-card: #1e293b;
    --text-primary: #f8fafc;
    --text-secondary: #94a3b8;
    --accent-safe: #4caf50;
    --accent-warn: #ffeb3b;
    --accent-danger: #f43f5e;
    --accent-raw: #60a5fa;
    --grid-color: #334155;
}

body {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    background-color: var(--bg-dark);
    color: var(--text-primary);
    margin: 0;
    padding: 2rem;
    line-height: 1.5;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
}

header {
    margin-bottom: 2rem;
    text-align: center;
}

h1 {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 0.5rem;
    background: linear-gradient(to right, #4caf50, #f43f5e);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.subtitle {
    color: var(--text-secondary);
    font-size: 1.1rem;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.card {
    background-color: var(--bg-card);
    border-radius: 1rem;
    padding: 1.5rem;
    border: 1px solid var(--grid-color);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: transform 0.2s;
}

.card:hover {
    transform: translateY(-2px);
}

.stat-title {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.5rem;
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
}

.stat-unit {
    font-size: 1rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.chart-container {
    background-color: var(--bg-card);
    border-radius: 1rem;
    padding: 1.5rem;
    border: 1px solid var(--grid-color);
    height: 400px;
    position: relative;
}

.chart-title {
    position: absolute;
    top: 1rem;
    left: 1.5rem;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    z-index: 10;
}

@media (max-width: 768px) {
    .charts-grid {
        grid-template-columns: 1fr;
    }
    body {
        padding: 1rem;
    }
}

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>CanSat MQ-2 Mission Report</h1>
            <div class="subtitle">Monitoreo de Calidad de Aire y Gases</div>
        </header>

        <!-- Summary Cards -->
        <div class="stats-grid">
            <!-- Pollution Percent -->
            <div class="card" style="border-top: 4px solid #4caf50">
                <div class="stat-title">Nivel de Contaminación</div>
                <div class="stat-value" style="color: #4caf50">
                    26.0<span class="stat-unit">%</span>
                </div>
                <div class="subtitle" style="font-size: 0.85rem; margin-top: 0.5rem">
                    Prom: 26.5 • Max: 27.0
                </div>
            </div>

            <!-- Gas Raw -->
            <div class="card" style="border-top: 4px solid var(--accent-raw)">
                <div class="stat-title">Valor Sensor (Raw)</div>
                <div class="stat-value" style="color: var(--accent-raw)">
                    268<span class="stat-unit">/1023</span>
                </div>
                <div class="subtitle" style="font-size: 0.85rem; margin-top: 0.5rem">
                    Prom: 275.6 • Max: 284
                </div>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">Nivel de Contaminación (%)</div>
                <canvas id="chartPollution"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Lectura Cruda del Sensor</div>
                <canvas id="chartRaw"></canvas>
            </div>
            
            <!-- Scatter (Full Width) -->
            <div class="chart-container" style="grid-column: 1 / -1;">
                <div class="chart-title">Relación: Raw Value vs Contaminación %</div>
                <canvas id="chartScatter"></canvas>
            </div>
        </div>
    </div>

    <script>
        const rawData = {"timestamp": ["2026-01-14 14:27:38", "2026-01-14 14:27:38", "2026-01-14 14:27:38", "2026-01-14 14:27:39", "2026-01-14 14:27:39", "2026-01-14 14:27:39", "2026-01-14 14:27:39", "2026-01-14 14:27:39", "2026-01-14 14:27:39", "2026-01-14 14:27:40", "2026-01-14 14:27:41", "2026-01-14 14:27:41", "2026-01-14 14:27:42", "2026-01-14 14:27:42", "2026-01-14 14:27:42", "2026-01-14 14:27:43", "2026-01-14 14:27:44", "2026-01-14 14:27:44", "2026-01-14 14:27:45", "2026-01-14 14:27:45", "2026-01-14 14:27:45", "2026-01-14 14:27:46", "2026-01-14 14:27:47", "2026-01-14 14:27:47", "2026-01-14 14:27:48", "2026-01-14 14:27:48", "2026-01-14 14:27:49", "2026-01-14 14:27:49", "2026-01-14 14:27:49", "2026-01-14 14:27:50", "2026-01-14 14:27:51", "2026-01-14 14:27:51", "2026-01-14 14:27:52", "2026-01-14 14:27:52", "2026-01-14 14:27:53", "2026-01-14 14:27:53", "2026-01-14 14:27:54", "2026-01-14 14:27:54", "2026-01-14 14:27:55", "2026-01-14 14:27:55", "2026-01-14 14:27:56", "2026-01-14 14:27:56", "2026-01-14 14:27:57", "2026-01-14 14:27:57", "2026-01-14 14:27:58", "2026-01-14 14:27:58", "2026-01-14 14:27:59", "2026-01-14 14:27:59", "2026-01-14 14:28:00", "2026-01-14 14:28:00", "2026-01-14 14:28:01", "2026-01-14 14:28:01", "2026-01-14 14:28:02", "2026-01-14 14:28:02", "2026-01-14 14:28:03", "2026-01-14 14:28:03", "2026-01-14 14:28:04", "2026-01-14 14:28:04", "2026-01-14 14:28:05", "2026-01-14 14:28:05", "2026-01-14 14:28:06", "2026-01-14 14:28:06", "2026-01-14 14:28:07", "2026-01-14 14:28:07", "2026-01-14 14:28:08", "2026-01-14 14:28:08", "2026-01-14 14:28:09", "2026-01-14 14:28:09", "2026-01-14 14:28:10", "2026-01-14 14:28:10", "2026-01-14 14:28:11", "2026-01-14 14:28:11", "2026-01-14 14:28:12", "2026-01-14 14:28:12", "2026-01-14 14:28:13", "2026-01-14 14:28:13", "2026-01-14 14:28:14", "2026-01-14 14:28:14", "2026-01-14 14:28:15", "2026-01-14 14:28:15", "2026-01-14 14:28:16", "2026-01-14 14:28:16", "2026-01-14 14:28:17", "2026-01-14 14:28:17", "2026-01-14 14:28:18", "2026-01-14 14:28:18", "2026-01-14 14:28:19", "2026-01-14 14:28:19", "2026-01-14 14:28:20", "2026-01-14 14:28:20", "2026-01-14 14:28:21", "2026-01-14 14:28:21", "2026-01-14 14:28:22", "2026-01-14 14:28:22", "2026-01-14 14:28:23", "2026-01-14 14:28:23", "2026-01-14 14:28:24", "2026-01-14 14:28:24", "2026-01-14 14:28:25", "2026-01-14 14:28:25", "2026-01-14 14:28:26", "2026-01-14 14:28:26", "2026-01-14 14:28:27", "2026-01-14 14:28:27", "2026-01-14 14:28:28", "2026-01-14 14:28:28", "2026-01-14 14:28:29", "2026-01-14 14:28:29", "2026-01-14 14:28:30", "2026-01-14 14:28:30", "2026-01-14 14:28:31", "2026-01-14 14:28:31", "2026-01-14 14:28:32", "2026-01-14 14:28:32", "2026-01-14 14:28:33", "2026-01-14 14:28:33", "2026-01-14 14:28:34", "2026-01-14 14:28:34", "2026-01-14 14:28:35", "2026-01-14 14:28:35", "2026-01-14 14:28:36", "2026-01-14 14:28:36", "2026-01-14 14:28:37", "2026-01-14 14:28:37", "2026-01-14 14:28:38", "2026-01-14 14:28:38", "2026-01-14 14:28:39", "2026-01-14 14:28:39", "2026-01-14 14:28:40", "2026-01-14 14:28:40", "2026-01-14 14:28:41", "2026-01-14 14:28:41", "2026-01-14 14:28:42", "2026-01-14 14:28:42", "2026-01-14 14:28:43", "2026-01-14 14:28:43", "2026-01-14 14:28:44", "2026-01-14 14:28:44", "2026-01-14 14:28:45", "2026-01-14 14:28:45", "2026-01-14 14:28:46", "2026-01-14 14:28:46", "2026-01-14 14:28:47", "2026-01-14 14:28:48", "2026-01-14 14:28:48", "2026-01-14 14:28:48", "2026-01-14 14:28:49", "2026-01-14 14:28:50", "2026-01-14 14:28:50", "2026-01-14 14:28:50", "2026-01-14 14:28:51", "2026-01-14 14:28:51", "2026-01-14 14:28:52", "2026-01-14 14:28:52", "2026-01-14 14:28:53", "2026-01-14 14:28:53", "2026-01-14 14:28:54", "2026-01-14 14:28:54", "2026-01-14 14:28:55"], "gas_raw": [284.0, 284.0, 284.0, 284.0, 283.0, 283.0, 283.0, 283.0, 283.0, 283.0, 283.0, 283.0, 282.0, 282.0, 282.0, 283.0, 282.0, 282.0, 282.0, 282.0, 281.0, 281.0, 281.0, 281.0, 281.0, 281.0, 281.0, 279.0, 280.0, 281.0, 280.0, 280.0, 280.0, 280.0, 280.0, 280.0, 280.0, 280.0, 279.0, 279.0, 280.0, 279.0, 279.0, 279.0, 280.0, 279.0, 279.0, 279.0, 279.0, 279.0, 278.0, 278.0, 278.0, 278.0, 278.0, 278.0, 278.0, 278.0, 278.0, 278.0, 277.0, 277.0, 277.0, 277.0, 278.0, 277.0, 277.0, 277.0, 277.0, 277.0, 277.0, 277.0, 276.0, 276.0, 276.0, 276.0, 276.0, 276.0, 276.0, 276.0, 276.0, 276.0, 275.0, 275.0, 275.0, 275.0, 275.0, 275.0, 275.0, 275.0, 275.0, 275.0, 274.0, 275.0, 274.0, 274.0, 274.0, 274.0, 274.0, 274.0, 274.0, 273.0, 273.0, 273.0, 274.0, 273.0, 273.0, 273.0, 273.0, 273.0, 273.0, 273.0, 272.0, 272.0, 272.0, 272.0, 272.0, 272.0, 270.0, 272.0, 271.0, 271.0, 271.0, 271.0, 271.0, 271.0, 271.0, 271.0, 271.0, 270.0, 270.0, 270.0, 270.0, 270.0, 270.0, 270.0, 270.0, 270.0, 270.0, 269.0, 269.0, 269.0, 269.0, 269.0, 269.0, 269.0, 269.0, 269.0, 269.0, 269.0, 269.0, 268.0, 268.0, 268.0, 268.0, 268.0, 268.0, 268.0, 268.0], "pollution_percent": [27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 27.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0, 26.0]};
        
        // Common Chart Options
        Chart.defaults.color = '#94a3b8';
        Chart.defaults.borderColor = '#334155';
        
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
                mode: 'index',
                intersect: false,
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    backgroundColor: '#1e293b',
                    titleColor: '#f8fafc',
                    bodyColor: '#cbd5e1',
                    borderColor: '#334155',
                    borderWidth: 1,
                    padding: 10,
                    displayColors: false
                }
            },
            scales: {
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        maxTicksLimit: 8,
                        maxRotation: 0
                    }
                },
                y: {
                    grid: {
                        color: '#33415555'
                    }
                }
            },
            elements: {
                point: {
                    radius: 0,
                    hitRadius: 10,
                    hoverRadius: 4
                },
                line: {
                    tension: 0.4, 
                    borderWidth: 2
                }
            }
        };

        function createChart(ctxId, label, data, colorInfo) {
            const ctx = document.getElementById(ctxId).getContext('2d');
            
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, colorInfo.start);
            gradient.addColorStop(1, colorInfo.end);

            return new Chart(ctx, {
                type: 'line',
                data: {
                    labels: rawData.timestamp,
                    datasets: [{
                        label: label,
                        data: data,
                        borderColor: colorInfo.border,
                        backgroundColor: gradient,
                        fill: true
                    }]
                },
                options: commonOptions
            });
        }

        // Pollution Chart
        createChart('chartPollution', 'Contaminación (%)', rawData.pollution_percent, {
            border: '#4caf50',
            start: '#4caf5080', // 50% opacity hex approximation
            end: '#4caf5000'
        });

        // Raw Value Chart
        createChart('chartRaw', 'Raw Value', rawData.gas_raw, {
            border: '#60a5fa',
            start: 'rgba(96, 165, 250, 0.5)',
            end: 'rgba(96, 165, 250, 0.0)'
        });

        // Scatter Chart
        const ctxScatter = document.getElementById('chartScatter').getContext('2d');
        const scatterData = rawData.gas_raw.map((r, i) => ({ x: r, y: rawData.pollution_percent[i] }));
        
        new Chart(ctxScatter, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Raw vs %',
                    data: scatterData,
                    backgroundColor: '#f43f5e',
                    borderColor: '#f43f5e',
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Valor Raw Sensor',
                            color: '#94a3b8'
                        },
                        grid: {
                            color: '#33415555'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Contaminación (%)',
                            color: '#94a3b8'
                        },
                        grid: {
                            color: '#33415555'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
